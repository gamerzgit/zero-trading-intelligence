{
  "dashboard": {
    "title": "ZERO Platform Overview",
    "tags": ["zero", "trading"],
    "timezone": "browser",
    "schemaVersion": 16,
    "version": 1,
    "refresh": "30s",
    "panels": [
      {
        "id": 1,
        "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0},
        "type": "timeseries",
        "title": "Price Chart - SPY (Last Hour)",
        "targets": [
          {
            "datasource": {"type": "postgres", "uid": "TimescaleDB"},
            "editorMode": "code",
            "format": "time_series",
            "rawQuery": true,
            "rawSql": "SELECT time AS \"time\", close AS \"SPY\" FROM candles_1m WHERE ticker = 'SPY' AND time > NOW() - INTERVAL '1 hour' ORDER BY time",
            "refId": "A",
            "sql": {
              "columns": [
                {"parameters": [], "type": "function"},
                {"parameters": [{"name": "Value", "type": "string", "value": "close"}], "type": "column"}
              ],
              "groupBy": [{"property": {"type": "string"}, "type": "groupBy"}],
              "limit": 50
            }
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": {"mode": "palette-classic"},
            "custom": {"axisLabel": "", "axisPlacement": "auto", "barAlignment": 0},
            "mappings": [],
            "unit": "currencyUSD"
          }
        }
      },
      {
        "id": 2,
        "gridPos": {"h": 8, "w": 12, "x": 12, "y": 0},
        "type": "stat",
        "title": "Latest Prices",
        "targets": [
          {
            "datasource": {"type": "postgres", "uid": "TimescaleDB"},
            "editorMode": "code",
            "format": "table",
            "rawQuery": true,
            "rawSql": "SELECT ticker, close AS price, time FROM candles_1m WHERE time = (SELECT MAX(time) FROM candles_1m WHERE ticker = candles_1m.ticker) ORDER BY ticker",
            "refId": "A"
          }
        ],
        "options": {
          "reduceOptions": {"values": false, "calcs": ["lastNotNull"], "fields": ""},
          "orientation": "auto",
          "textMode": "auto",
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto"
        },
        "fieldConfig": {
          "defaults": {
            "mappings": [],
            "thresholds": {"mode": "absolute", "steps": [{"value": null, "color": "green"}]},
            "unit": "currencyUSD"
          }
        }
      },
      {
        "id": 3,
        "gridPos": {"h": 8, "w": 24, "x": 0, "y": 8},
        "type": "table",
        "title": "Recent Candles (Last 20)",
        "targets": [
          {
            "datasource": {"type": "postgres", "uid": "TimescaleDB"},
            "editorMode": "code",
            "format": "table",
            "rawQuery": true,
            "rawSql": "SELECT ticker, time, open, high, low, close, volume FROM candles_1m ORDER BY time DESC LIMIT 20",
            "refId": "A"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "custom": {"align": "auto"},
            "mappings": [],
            "thresholds": {"mode": "absolute", "steps": [{"value": null, "color": "green"}]}
          },
          "overrides": [
            {
              "matcher": {"id": "byName", "options": "close"},
              "properties": [{"id": "unit", "value": "currencyUSD"}]
            },
            {
              "matcher": {"id": "byName", "options": "open"},
              "properties": [{"id": "unit", "value": "currencyUSD"}]
            },
            {
              "matcher": {"id": "byName", "options": "high"},
              "properties": [{"id": "unit", "value": "currencyUSD"}]
            },
            {
              "matcher": {"id": "byName", "options": "low"},
              "properties": [{"id": "unit", "value": "currencyUSD"}]
            }
          ]
        }
      },
      {
        "id": 4,
        "gridPos": {"h": 6, "w": 12, "x": 0, "y": 16},
        "type": "stat",
        "title": "Total Candles",
        "targets": [
          {
            "datasource": {"type": "postgres", "uid": "TimescaleDB"},
            "editorMode": "code",
            "format": "table",
            "rawQuery": true,
            "rawSql": "SELECT COUNT(*) as count FROM candles_1m",
            "refId": "A"
          }
        ],
        "options": {
          "reduceOptions": {"values": false, "calcs": ["lastNotNull"], "fields": ""},
          "orientation": "auto",
          "textMode": "auto",
          "colorMode": "none",
          "graphMode": "none"
        },
        "fieldConfig": {
          "defaults": {
            "mappings": [],
            "thresholds": {"mode": "absolute", "steps": [{"value": null, "color": "green"}]},
            "unit": "short"
          }
        }
      },
      {
        "id": 5,
        "gridPos": {"h": 6, "w": 12, "x": 12, "y": 16},
        "type": "stat",
        "title": "Market State",
        "targets": [
          {
            "datasource": {"type": "postgres", "uid": "TimescaleDB"},
            "editorMode": "code",
            "format": "table",
            "rawQuery": true,
            "rawSql": "SELECT state, reason, timestamp FROM regime_log ORDER BY timestamp DESC LIMIT 1",
            "refId": "A"
          }
        ],
        "options": {
          "reduceOptions": {"values": false, "calcs": ["lastNotNull"], "fields": ""},
          "orientation": "auto",
          "textMode": "auto",
          "colorMode": "value"
        },
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {"type": "value", "options": {"GREEN": {"text": "ðŸŸ¢ GREEN"}, "YELLOW": {"text": "ðŸŸ¡ YELLOW"}, "RED": {"text": "ðŸ”´ RED"}}}
            ],
            "thresholds": {"mode": "absolute", "steps": [{"value": null, "color": "green"}]}
          }
        }
      }
    ],
    "time": {"from": "now-1h", "to": "now"},
    "timepicker": {},
    "templating": {"list": []},
    "annotations": {"list": []},
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "links": [],
    "liveNow": false,
    "weekStart": ""
  }
}
